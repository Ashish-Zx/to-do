import React, { useState } from 'react';
import { Link } from 'react-router-dom';
import './Main.css';
import AuthNavbar from './AuthNavbar.jsx';


function Main() {
    const [tasks, setTasks] = useState([
        { id: 1, title: 'Complete project proposal', description: 'Finalize and submit the Q1 proposal', completed: false },
        { id: 2, title: 'Team meeting', description: 'Discuss roadmap for next sprint', completed: false },
        { id: 3, title: 'Review pull requests', description: 'Check pending PRs on GitHub', completed: true },
    ]);
    const [showAddModal, setShowAddModal] = useState(false);
    const [showEditModal, setShowEditModal] = useState(false);
    const [currentTask, setCurrentTask] = useState(null);
    const [newTask, setNewTask] = useState({ title: '', description: '' });

    const handleAddTask = (e) => {
        e.preventDefault();
        if (!newTask.title.trim()) return;

        const task = {
            id: Date.now(),
            title: newTask.title,
            description: newTask.description,
            completed: false,
        };
        setTasks([...tasks, task]);
        setNewTask({ title: '', description: '' });
        setShowAddModal(false);
    };

    const handleEditTask = (e) => {
        e.preventDefault();
        setTasks(tasks.map(t => t.id === currentTask.id ? currentTask : t));
        setShowEditModal(false);
        setCurrentTask(null);
    };

    const handleDeleteTask = (id) => {
        if (window.confirm('Are you sure you want to delete this task?')) {
            setTasks(tasks.filter(t => t.id !== id));
        }
    };

    const toggleComplete = (id) => {
        setTasks(tasks.map(t => t.id === id ? { ...t, completed: !t.completed } : t));
    };

    const openEditModal = (task) => {
        setCurrentTask({ ...task });
        setShowEditModal(true);
    };
        <>
            <AuthNavbar userName="John Doe" />
            <div className="main-container">
    return (
        <div className="main-container">
            <div className="main-header">
                <div className="header-content">
                    <h1>My Tasks</h1>
                    <p className="task-count">
                        {tasks.filter(t => !t.completed).length} active, {tasks.filter(t => t.completed).length} completed
                    </p>
                </div>
                <button className="btn-add" onClick={() => setShowAddModal(true)}>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Add Task
                </button>
            </div>

            <div className="tasks-container">
                {tasks.length === 0 ? (
                    <div className="empty-state">
                        <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                            <path d="M9 11l3 3L22 4"></path>
                            <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                        </svg>
                        <h2>No tasks yet</h2>
                        <p>Create your first task to get started</p>
                        <button className="btn-primary" onClick={() => setShowAddModal(true)}>Add Task</button>
                    </div>
                ) : (
                    <div className="tasks-grid">
                        {tasks.map(task => (
                            <div key={task.id} className={`task-card ${task.completed ? 'completed' : ''}`}>
                                <div className="task-header">
                                    <div className="task-checkbox" onClick={() => toggleComplete(task.id)}>
                                        {task.completed && (
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3">
                                                <polyline points="20 6 9 17 4 12"></polyline>
                                            </svg>
                                        )}
                                    </div>
                                    <h3 className="task-title">{task.title}</h3>
                                </div>
                                <p className="task-description">{task.description}</p>
                                <div className="task-actions">
                                    <button className="btn-icon" onClick={() => openEditModal(task)} aria-label="Edit task">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                        </svg>
                                    </button>
                                    <button className="btn-icon btn-delete" onClick={() => handleDeleteTask(task.id)} aria-label="Delete task">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                            <polyline points="3 6 5 6 21 6"></polyline>
                                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        ))}
                    </div>
                )}
            </div>

            {/* Add Task Modal */}
            {showAddModal && (
                <div className="modal-overlay" onClick={() => setShowAddModal(false)}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                        <div className="modal-header">
                            <h2>Add New Task</h2>
                            <button className="btn-close" onClick={() => setShowAddModal(false)} aria-label="Close">×</button>
                        </div>
                        <form onSubmit={handleAddTask}>
                            <div className="form-group">
                                <label htmlFor="title">Title</label>
                                <input
                                    id="title"
                                    type="text"
                                    value={newTask.title}
                                    onChange={(e) => setNewTask({ ...newTask, title: e.target.value })}
                                    placeholder="Enter task title"
                                    required
                                    autoFocus
                                />
                            </div>
                            <div className="form-group">
                                <label htmlFor="description">Description</label>
                                <textarea
                                    id="description"
                                    value={newTask.description}
                                    onChange={(e) => setNewTask({ ...newTask, description: e.target.value })}
                                    placeholder="Enter task description"
                                    rows="4"
                                />
                            </div>
                            <div className="modal-actions">
                                <button type="button" className="btn-secondary" onClick={() => setShowAddModal(false)}>Cancel</button>
                                <button type="submit" className="btn-primary">Add Task</button>
                            </div>
                        </form>
                    </div>
                </div>
            )}

            {/* Edit Task Modal */}
            {showEditModal && currentTask && (
                <div className="modal-overlay" onClick={() => setShowEditModal(false)}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                        <div className="modal-header">
                            <h2>Edit Task</h2>
                            <button className="btn-close" onClick={() => setShowEditModal(false)} aria-label="Close">×</button>
                        </div>
                        <form onSubmit={handleEditTask}>
                            <div className="form-group">
                                <label htmlFor="edit-title">Title</label>
                                <input
                                    id="edit-title"
                                    type="text"
                                    value={currentTask.title}
                                    onChange={(e) => setCurrentTask({ ...currentTask, title: e.target.value })}
                                    placeholder="Enter task title"
                                    required
                                    autoFocus
                                />
                            </div>
                            <div className="form-group">
                                <label htmlFor="edit-description">Description</label>
                                <textarea
                                    id="edit-description"
                                    value={currentTask.description}
                                    onChange={(e) => setCurrentTask({ ...currentTask, description: e.target.value })}
                                    placeholder="Enter task description"
                                    rows="4"
                                />
                            </div>
                            <div className="modal-actions">
                                <button type="button" className="btn-secondary" onClick={() => setShowEditModal(false)}>Cancel</button>
                                <button type="submit" className="btn-primary">Save Changes</button>
                            </div>
                        </form>
                    </div>
                </div>
            )}
        </div>
    );
}

export default Main;
